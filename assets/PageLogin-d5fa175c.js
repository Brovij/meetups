import{D as w,O as b,g as c,r,o as g,i as h,w as o,l as L,a,j as u}from"./vendor-9b0cf635.js";import{U as v,a as y}from"./UiInput-35031c5c.js";import{_ as S,f as V,e as k,l as x}from"./index-abfa6c99.js";import{U as F}from"./UiButton-e852b53f.js";import{U as B,L as P}from"./LayoutAuth-fca612a7.js";import{u as q}from"./useLayout-7717c0e7.js";import{u as A}from"./useApi-f4bc375e.js";const G={name:"PageLogin",components:{UiForm:B,UiButton:F,UiInput:v,UiLink:V,UiFormGroup:y},props:{from:{type:[String,Object],default:()=>({name:"index"})}},setup(m){w({title:"Вход"}),q(P,{title:"Вход"});const t=k(),p=b(),{result:e,request:d}=A(x,{showProgress:!0,successToast:"Авторизация прошла успешно",errorToast:"Неверные учётные данные..."}),n=c(""),s=c("");return{email:n,password:s,handleSubmit:async()=>{await d(n.value,s.value),e.value.success&&(t.setUser(e.value.data),await p.push(m.from))}}}};function I(m,t,p,e,d,n){const s=r("UiInput"),i=r("UiFormGroup"),f=r("UiButton"),U=r("UiLink"),_=r("UiForm");return g(),h(_,{onSubmit:L(e.handleSubmit,["prevent"])},{buttons:o(()=>[a(f,{variant:"primary",type:"submit",block:""},{default:o(()=>[u("Войти")]),_:1})]),append:o(()=>[u(" Нет аккаунта? "),a(U,{to:{name:"register"},class:"link"},{default:o(()=>[u("Зарегистрируйтесь")]),_:1})]),default:o(()=>[a(i,{label:"Email"},{default:o(()=>[a(s,{modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=l=>e.email=l),name:"email",type:"email",placeholder:"demo@email",required:""},null,8,["modelValue"])]),_:1}),a(i,{label:"Пароль"},{default:o(()=>[a(s,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=l=>e.password=l),name:"password",type:"password",placeholder:"password",required:""},null,8,["modelValue"])]),_:1})]),_:1},8,["onSubmit"])}const H=S(G,[["render",I],["__file","PageLogin.vue"]]);export{H as default};
