import{_ as m,U as j,a as E,b as q,c as Q}from"./index-abfa6c99.js";import{o as i,c as p,m as g,y as x,M as K,i as _,w as d,d as u,n as D,r as l,j as y,t as C,k as S,a as v,F as w,A as $,l as V,h as M,q as W,C as Y,g as I,N as H,O as J,P as X,Q as F,R as Z,K as ee,p as te,b as ae}from"./vendor-9b0cf635.js";import{M as ne,g as oe,a as se,b,c as z,d as A}from"./MeetupInfo-3c879960.js";import{U as re,a as ie}from"./UiInput-35031c5c.js";import{g as ce}from"./meetupsApi-100c656f.js";import{u as ue}from"./useApi-f4bc375e.js";const O={primary:"badge_primary",success:"badge_success"},de={name:"UiBadge",props:{type:{type:String,required:!1,validator:e=>Object.keys(O).includes(e)}},computed:{badgeClass(){return O[this.type]}}};function le(e,t,n,a,o,s){return i(),p("span",{class:x(["badge",s.badgeClass])},[g(e.$slots,"default",{},void 0,!0)],2)}const _e=m(de,[["render",le],["__scopeId","data-v-17ee97f5"],["__file","UiBadge.vue"]]);const B={name:"UiCard",props:{tag:{type:[String,Object],default:"div"},cover:{type:String},badge:{type:String,required:!1}},computed:{coverStyle(){return this.cover?`url('${this.cover}')`:"var(--default-cover)"}}},L=()=>{K(e=>({"12cfc1ca":e.coverStyle}))},R=B.setup;B.setup=R?(e,t)=>(L(),R(e,t)):L;const pe=B,ve={class:"card__col"},me={class:"card__cover"},fe={class:"card__col"},he={class:"card__content"};function ge(e,t,n,a,o,s){return i(),_(D(n.tag),{class:"card"},{default:d(()=>[u("div",ve,[u("div",me,[u("header",null,[g(e.$slots,"header",{},void 0,!0)])])]),u("div",fe,[u("div",he,[g(e.$slots,"default",{},void 0,!0)])])]),_:3})}const ye=m(pe,[["render",ge],["__scopeId","data-v-aa9c553c"],["__file","UiCard.vue"]]);const Ue={name:"MeetupCard",components:{MeetupInfo:ne,UiBadge:_e,UiCard:ye},props:{meetup:{type:Object,required:!0}}};function Ce(e,t,n,a,o,s){const r=l("UiBadge"),c=l("MeetupInfo"),h=l("UiCard");return i(),_(h,{tag:"article",cover:n.meetup.image,class:"meetup-card"},{header:d(()=>[y(C(n.meetup.title),1)]),default:d(()=>[n.meetup.organizing?(i(),_(r,{key:0,type:"success",class:"meetup-card__badge"},{default:d(()=>[y("Организую")]),_:1})):S("",!0),n.meetup.attending?(i(),_(r,{key:1,type:"primary",class:"meetup-card__badge"},{default:d(()=>[y("Участвую")]),_:1})):S("",!0),v(c,{date:n.meetup.date,place:n.meetup.place,organizer:n.meetup.organizer},null,8,["date","place","organizer"])]),_:1},8,["cover"])}const we=m(Ue,[["render",Ce],["__scopeId","data-v-d4dcca71"],["__file","MeetupCard.vue"]]);const $e={name:"MeetupsList",components:{UiTransitionGroupFade:j,MeetupCard:we},props:{meetups:{type:Array,required:!0}}};function Me(e,t,n,a,o,s){const r=l("MeetupCard"),c=l("RouterLink"),h=l("UiTransitionGroupFade");return i(),_(h,{tag:"ul",class:"meetups-list"},{default:d(()=>[(i(!0),p(w,null,$(n.meetups,f=>(i(),p("li",{key:f.id,class:"meetups-list__item"},[v(c,{to:{name:"meetup",params:{meetupId:f.id}},class:"meetups-list__item-link",tabindex:"0"},{default:d(()=>[v(r,{meetup:f},null,8,["meetup"])]),_:2},1032,["to"])]))),128))]),_:1})}const be=m($e,[["render",Me],["__scopeId","data-v-e8e4fa03"],["__file","MeetupsList.vue"]]);const Ve={name:"UiCalendarView",data(){return{currentDate:oe(new Date)}},computed:{localDate(){return this.currentDate.toLocaleDateString(navigator.language,{month:"long",year:"numeric"})},calendarCells(){const e=se(this.currentDate),t=b(this.currentDate,-(z(this.currentDate)-1)),n=b(e,7-z(e)),a=[];for(let o=t;o<=n;o=b(o,1))a.push({timestamp:+o,year:o.getUTCFullYear(),month:o.getUTCMonth(),date:o.getUTCDate(),isCurrentMonth:o.getUTCMonth()===this.currentDate.getUTCMonth(),localDateString:o.toLocaleDateString(navigator.language,{dateStyle:"long"})});return a}},methods:{setPreviousMonth(){this.currentDate=A(this.currentDate,-1)},setNextMonth(){this.currentDate=A(this.currentDate,1)}}},xe={class:"calendar-view"},De={class:"calendar-view__controls"},Ie={class:"calendar-view__controls-inner"},Be={class:"calendar-view__date"},ke={class:"calendar-view__grid"},Ge=["aria-label"],Se={class:"calendar-view__cell-day"},Fe={class:"calendar-view__cell-content"};function ze(e,t,n,a,o,s){return i(),p("div",xe,[u("div",De,[u("div",Ie,[u("button",{class:"calendar-view__control-left",type:"button","aria-label":"Previous month",onClick:t[0]||(t[0]=V((...r)=>s.setPreviousMonth&&s.setPreviousMonth(...r),["stop"]))}),u("div",Be,C(s.localDate),1),u("button",{class:"calendar-view__control-right",type:"button","aria-label":"Next month",onClick:t[1]||(t[1]=V((...r)=>s.setNextMonth&&s.setNextMonth(...r),["stop"]))})])]),u("div",ke,[(i(!0),p(w,null,$(s.calendarCells,r=>(i(),p("div",{key:r.timestamp,class:x(["calendar-view__cell",{"calendar-view__cell_inactive":!r.isCurrentMonth}]),"aria-label":r.localDateString,tabindex:"0"},[u("div",Se,C(r.date),1),u("div",Fe,[g(e.$slots,"default",{timestamp:r.timestamp,year:r.year,month:r.month,date:r.date,inactive:!r.isCurrentMonth},void 0,!0)])],10,Ge))),128))])])}const Ae=m(Ve,[["render",ze],["__scopeId","data-v-204e80f7"],["__file","UiCalendarView.vue"]]);const Oe={name:"UiCalendarEvent",props:{tag:{type:[String,Object,Function],default:"div"}}};function Le(e,t,n,a,o,s){return i(),_(D(n.tag),{class:"calendar-event"},{default:d(()=>[g(e.$slots,"default",{},void 0,!0)]),_:3})}const Re=m(Oe,[["render",Le],["__scopeId","data-v-746aed3d"],["__file","UiCalendarEvent.vue"]]),je={name:"MeetupsCalendar",components:{UiCalendarEvent:Re,UiCalendarView:Ae},props:{meetups:{type:Array,required:!0}},computed:{meetupsByDate(){const e={};for(const t of this.meetups)e[t.date]?e[t.date].push(t):e[t.date]=[t];return e}}};function Te(e,t,n,a,o,s){const r=l("UiCalendarEvent"),c=l("UiCalendarView");return i(),_(c,null,{default:d(({timestamp:h})=>[(i(!0),p(w,null,$(s.meetupsByDate[h],f=>(i(),_(r,{key:f.id,tag:"RouterLink",to:{name:"meetup",params:{meetupId:f.id}}},{default:d(()=>[y(C(f.title),1)]),_:2},1032,["to"]))),128))]),_:1})}const Ne=m(je,[["render",Te],["__file","MeetupsCalendar.vue"]]);const Pe={class:"radio-group"},Ee=["id","name","value","checked","onChange"],qe=["for"],Qe={__name:"UiRadioGroup",props:{options:{type:Array,required:!0},modelValue:{type:String},name:{type:String,default:()=>"radio-group"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=a=>{t("update:modelValue",a)};return(a,o)=>(i(),p("div",Pe,[(i(!0),p(w,null,$(e.options,s=>(i(),p("div",{key:s.value,class:"radio-group__button"},[u("input",{id:`radio-group_${e.name}_${s.value}`,class:"radio-group__input",type:"radio",name:e.name,value:e.options.value,checked:s.value===e.modelValue,onChange:()=>n(s.value)},null,40,Ee),u("label",{for:`radio-group_${e.name}_${s.value}`,class:"radio-group__label"},C(s.text),9,qe)]))),128))]))}},Ke=m(Qe,[["__scopeId","data-v-43d5e2cc"],["__file","UiRadioGroup.vue"]]);const We={name:"UiButtonGroup",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=M(()=>e.modelValue);W("UiButtonGroup",{activeValue:n,updateActiveValue:o=>{t("update:modelValue",o)}})}},Ye={class:"button-group",role:"group"};function He(e,t,n,a,o,s){return i(),p("div",Ye,[g(e.$slots,"default",{},void 0,!0)])}const Je=m(We,[["render",He],["__scopeId","data-v-4e0fb22c"],["__file","UiButtonGroup.vue"]]);const Xe={name:"UiButtonGroupItem",props:{value:{required:!0}},setup(e){const t=Y("UiButtonGroup");t||console.warn("UiButtonGroupItem must be used inside UiButtonGroup");const{activeValue:n,updateActiveValue:a}=t;return{isActive:M(()=>n.value===e.value),activate:()=>{a(e.value)}}}},Ze=["aria-selected"];function et(e,t,n,a,o,s){return i(),p("button",{class:x(["button-group__button",{"button-group__button_active":a.isActive}]),type:"button","aria-selected":a.isActive,onClick:t[0]||(t[0]=V((...r)=>a.activate&&a.activate(...r),["stop"]))},[g(e.$slots,"default")],10,Ze)}const tt=m(Xe,[["render",et],["__scopeId","data-v-da700da7"],["__file","UiButtonGroupItem.vue"]]);function at(){const e=I(null),{request:t,result:n}=ue(ce);return H(async()=>{await t(),e.value=n.value.data}),{meetups:e}}function nt(e){const t=I({date:"all",participation:"all",search:""}),n=[{text:"Все",value:"all"},{text:"Прошедшие",value:"past"},{text:"Ожидаемые",value:"future"}],a=M(()=>{const o=c=>t.value.date==="all"||t.value.date==="past"&&new Date(c.date)<=new Date||t.value.date==="future"&&new Date(c.date)>new Date,s=c=>t.value.participation==="all"||t.value.participation==="organizing"&&c.organizing||t.value.participation==="attending"&&c.attending,r=c=>[c.title,c.description,c.place,c.organizer].join(" ").toLowerCase().includes(t.value.search.toLowerCase());return e.value.filter(c=>o(c)&&s(c)&&r(c))});return{filter:t,dateFilterOptions:n,filteredMeetups:a}}function ot(e,t={}){const n=J(),a=X();return F(a,()=>{for(const o of Object.keys(e))e[o].value=a.query[o]??t[o]},{immediate:!0,deep:!0}),F(()=>Object.values(e),()=>{const o={};for(const s of Object.keys(e))o[s]=e[s].value!==t[s]?e[s].value:void 0;n.replace({query:o})},{deep:!0}),e}const st={name:"PageMeetups",components:{UiTransitionGroupFade:j,UiInput:re,UiFormGroup:ie,UiButtonGroupItem:tt,UiIcon:E,UiRadioGroup:Ke,UiButtonGroup:Je,UiContainer:q,UiAlert:Q},setup(){const{meetups:e}=at(),{filteredMeetups:t,filter:n,dateFilterOptions:a}=nt(e),o=I("list");ot({...Z(n.value),view:o},{participation:"all",date:"all",search:"",view:"list"});const s=M(()=>({list:be,calendar:Ne})[o.value]);return{meetups:e,filter:n,filteredMeetups:t,dateFilterOptions:a,view:o,viewComponent:s}}},T=e=>(te("data-v-2481cc46"),e=e(),ae(),e),rt={class:"filters-panel"},it={class:"filters-panel__col"},ct={class:"filters-panel__col"},ut=T(()=>u("svg",{fill:"none",height:"28",viewBox:"0 0 28 28",width:"28",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"clip-rule":"evenodd",d:"m5 7c-.55228 0-1 .44772-1 1s.44772 1 1 1h.01c.55228 0 1-.44772 1-1s-.44772-1-1-1zm5 0c-.55228 0-1 .44772-1 1s.44772 1 1 1h13c.5523 0 1-.44772 1-1s-.4477-1-1-1zm0 6c-.55228 0-1 .4477-1 1s.44772 1 1 1h13c.5523 0 1-.4477 1-1s-.4477-1-1-1zm-1 7c0-.5523.44772-1 1-1h13c.5523 0 1 .4477 1 1s-.4477 1-1 1h-13c-.55228 0-1-.4477-1-1zm-5-6c0-.5523.44772-1 1-1h.01c.55228 0 1 .4477 1 1s-.44772 1-1 1h-.01c-.55228 0-1-.4477-1-1zm1 5c-.55228 0-1 .4477-1 1s.44772 1 1 1h.01c.55228 0 1-.4477 1-1s-.44772-1-1-1z","fill-rule":"evenodd"})],-1)),dt=T(()=>u("svg",{height:"22",viewBox:"0 0 20 22",width:"20",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"clip-rule":"evenodd",d:"m15 1c0-.552285-.4477-1-1-1s-1 .447715-1 1v1h-6v-1c0-.552285-.44772-1-1-1s-1 .447715-1 1v1h-2c-1.65685 0-3 1.34315-3 3v14c0 1.6569 1.34315 3 3 3h14c1.6569 0 3-1.3431 3-3v-14c0-1.65685-1.3431-3-3-3h-2zm3 7v-3c0-.55228-.4477-1-1-1h-2v1c0 .55228-.4477 1-1 1s-1-.44772-1-1v-1h-6v1c0 .55228-.44772 1-1 1s-1-.44772-1-1v-1h-2c-.55228 0-1 .44772-1 1v3zm-16 2h16v9c0 .5523-.4477 1-1 1h-14c-.55228 0-1-.4477-1-1z","fill-rule":"evenodd"})],-1));function lt(e,t,n,a,o,s){const r=l("UiRadioGroup"),c=l("UiIcon"),h=l("UiInput"),f=l("UiFormGroup"),k=l("UiButtonGroupItem"),N=l("UiButtonGroup"),G=l("UiAlert"),P=l("UiContainer");return i(),_(P,null,{default:d(()=>[u("div",rt,[u("div",it,[v(r,{modelValue:a.filter.date,"onUpdate:modelValue":t[0]||(t[0]=U=>a.filter.date=U),options:a.dateFilterOptions,name:"date"},null,8,["modelValue","options"])]),u("div",ct,[v(f,{inline:""},{default:d(()=>[v(h,{modelValue:a.filter.search,"onUpdate:modelValue":t[1]||(t[1]=U=>a.filter.search=U),modelModifiers:{trim:!0},rounded:"",small:"",placeholder:"Поиск",type:"search"},{"left-icon":d(()=>[v(c,{icon:"search"})]),_:1},8,["modelValue"])]),_:1}),v(f,{inline:""},{default:d(()=>[v(N,{modelValue:a.view,"onUpdate:modelValue":t[2]||(t[2]=U=>a.view=U)},{default:d(()=>[v(k,{value:"list"},{default:d(()=>[ut]),_:1}),v(k,{value:"calendar"},{default:d(()=>[dt]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),a.meetups?(i(),_(ee,{key:0,include:"MeetupsCalendar"},[a.filteredMeetups.length?(i(),_(D(a.viewComponent),{key:0,meetups:a.filteredMeetups},null,8,["meetups"])):(i(),_(G,{key:1},{default:d(()=>[y("Митапов по заданным условиям не найдено...")]),_:1}))],1024)):(i(),_(G,{key:1},{default:d(()=>[y("Загрузка...")]),_:1}))]),_:1})}const gt=m(st,[["render",lt],["__scopeId","data-v-2481cc46"],["__file","PageMeetups.vue"]]);export{gt as default};
