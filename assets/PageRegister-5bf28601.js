import{o as V,c as h,X as w,Y as k,d as g,S as x,m as y,p as S,b as C,D as B,O as I,g as d,r as i,i as q,w as l,l as F,a,j as _}from"./vendor-9b0cf635.js";import{U as L,a as M}from"./UiInput-35031c5c.js";import{U as P,L as A}from"./LayoutAuth-fca612a7.js";import{_ as v,f as R,u as T,r as E}from"./index-abfa6c99.js";import{U as G}from"./UiButton-e852b53f.js";import{u as N}from"./useApi-f4bc375e.js";import{u as D}from"./useLayout-7717c0e7.js";const j={name:"UiCheckbox",inheritAttrs:!1,props:{modelValue:{type:[Boolean,Array,Set],default:!1}},emits:{"update:modelValue":null},computed:{customModel:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},H=t=>(S("data-v-5748989a"),t=t(),C(),t),O={class:"checkbox"},X=H(()=>g("span",{class:"checkbox__box"},null,-1));function Y(t,e,f,o,m,u){return V(),h("label",O,[w(g("input",x({"onUpdate:modelValue":e[0]||(e[0]=s=>u.customModel=s),type:"checkbox",class:"checkbox__input"},t.$attrs),null,16),[[k,u.customModel]]),X,y(t.$slots,"default",{},void 0,!0)])}const z=v(j,[["render",Y],["__scopeId","data-v-5748989a"],["__file","UiCheckbox.vue"]]),J={name:"PageRegister",components:{UiForm:P,UiButton:G,UiLink:R,UiCheckbox:z,UiInput:L,UiFormGroup:M},setup(){B({title:"Регистрация"}),D(A,{title:"Регистрация"});const t=I(),e=T(),{result:f,request:o}=N(E,{showProgress:!0,successToast:"Регистрация выполнена успешно",errorToast:!0}),m=d(""),u=d(""),s=d(""),n=d(""),p=d(!1),U=()=>{if(s.value!==n.value)return"Пароли не совпадают";if(!p.value)return"Требуется согласится с условиями"};return{email:m,fullname:u,password:s,password2:n,agree:p,handleSubmit:async()=>{const c=U();if(c){e.error(c);return}await o({email:m.value,fullname:u.value,password:s.value}),f.value.success&&await t.push({name:"login"})}}}};function K(t,e,f,o,m,u){const s=i("UiInput"),n=i("UiFormGroup"),p=i("UiCheckbox"),U=i("UiButton"),b=i("UiLink"),c=i("UiForm");return V(),q(c,{onSubmit:F(o.handleSubmit,["prevent"])},{buttons:l(()=>[a(U,{variant:"primary",type:"submit"},{default:l(()=>[_("Зарегистрироваться")]),_:1})]),append:l(()=>[_(" Уже есть аккаунт? "),a(b,{to:{name:"login"}},{default:l(()=>[_("Войдите")]),_:1})]),default:l(()=>[a(n,{label:"Email"},{default:l(()=>[a(s,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=r=>o.email=r),name:"email",type:"email",required:""},null,8,["modelValue"])]),_:1}),a(n,{label:"Имя"},{default:l(()=>[a(s,{modelValue:o.fullname,"onUpdate:modelValue":e[1]||(e[1]=r=>o.fullname=r),name:"fullname",required:""},null,8,["modelValue"])]),_:1}),a(n,{label:"Пароль"},{default:l(()=>[a(s,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=r=>o.password=r),name:"password",type:"password",required:"",minlength:"6"},null,8,["modelValue"])]),_:1}),a(n,{label:"Повтор пароля"},{default:l(()=>[a(s,{modelValue:o.password2,"onUpdate:modelValue":e[3]||(e[3]=r=>o.password2=r),type:"password",required:"",minlength:"6"},null,8,["modelValue"])]),_:1}),a(n,null,{default:l(()=>[a(p,{modelValue:o.agree,"onUpdate:modelValue":e[4]||(e[4]=r=>o.agree=r),name:"agree",required:""},{default:l(()=>[_("Я согласен с условиями")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["onSubmit"])}const te=v(J,[["render",K],["__file","PageRegister.vue"]]);export{te as default};
